{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@flarum/emoji/./src/common/cdn.js","webpack://@flarum/emoji/./src/forum/addComposerAutocomplete.js","webpack://@flarum/emoji/./src/forum/fragments/AutocompleteDropdown.js","webpack://@flarum/emoji/./src/forum/helpers/getEmojiIconCode.js","webpack://@flarum/emoji/./src/forum/index.js","webpack://@flarum/emoji/./src/forum/renderEmoji.js","webpack://@flarum/emoji/../../../node_modules/twemoji/dist/twemoji.esm.js","webpack://@flarum/emoji/external root \"flarum.core.compat['common/Fragment']\"","webpack://@flarum/emoji/external root \"flarum.core.compat['common/components/TextEditor']\"","webpack://@flarum/emoji/external root \"flarum.core.compat['common/components/TextEditorButton']\"","webpack://@flarum/emoji/external root \"flarum.core.compat['common/extend']\"","webpack://@flarum/emoji/external root \"flarum.core.compat['common/models/Post']\"","webpack://@flarum/emoji/external root \"flarum.core.compat['common/utils/KeyboardNavigatable']\"","webpack://@flarum/emoji/external root \"flarum.core.compat['forum/app']\"","webpack://@flarum/emoji/../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@flarum/emoji/../../../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@flarum/emoji/../../../node_modules/simple-emoji-map/index.mjs","webpack://@flarum/emoji/webpack/bootstrap","webpack://@flarum/emoji/webpack/runtime/compat get default export","webpack://@flarum/emoji/webpack/runtime/define property getters","webpack://@flarum/emoji/webpack/runtime/hasOwnProperty shorthand","webpack://@flarum/emoji/webpack/runtime/make namespace object","webpack://@flarum/emoji/./forum.js"],"sourcesContent":["import twemoji from 'twemoji';\nimport app from 'flarum/forum/app';\n\nexport const version = /([0-9]+).[0-9]+.[0-9]+/g.exec(twemoji.base)[1];\n\nexport default function () {\n  return app.forum.attribute('flarum-emoji.cdn')\n    .replace('[version]', version)\n};\n","import emojiMap from 'simple-emoji-map';\n\nimport { extend } from 'flarum/common/extend';\nimport TextEditor from 'flarum/common/components/TextEditor';\nimport TextEditorButton from 'flarum/common/components/TextEditorButton';\nimport KeyboardNavigatable from 'flarum/common/utils/KeyboardNavigatable';\n\nimport AutocompleteDropdown from './fragments/AutocompleteDropdown';\nimport getEmojiIconCode from './helpers/getEmojiIconCode';\nimport cdn from '../common/cdn';\n\nexport default function addComposerAutocomplete() {\n  const emojiKeys = Object.keys(emojiMap);\n  const $container = $('<div class=\"ComposerBody-emojiDropdownContainer\"></div>');\n  const dropdown = new AutocompleteDropdown();\n\n  extend(TextEditor.prototype, 'oncreate', function () {\n    const $editor = this.$('.TextEditor-editor').wrap('<div class=\"ComposerBody-emojiWrapper\"></div>');\n\n    this.navigator = new KeyboardNavigatable();\n    this.navigator\n      .when(() => dropdown.active)\n      .onUp(() => dropdown.navigate(-1))\n      .onDown(() => dropdown.navigate(1))\n      .onSelect(dropdown.complete.bind(dropdown))\n      .onCancel(dropdown.hide.bind(dropdown))\n      .bindTo($editor);\n\n    $editor.after($container);\n  });\n\n  extend(TextEditor.prototype, 'buildEditorParams', function (params) {\n    let relEmojiStart;\n    let absEmojiStart;\n    let typed;\n\n    const applySuggestion = (replacement) => {\n      this.attrs.composer.editor.replaceBeforeCursor(absEmojiStart - 1, replacement + ' ');\n\n      dropdown.hide();\n    };\n\n    params.inputListeners.push(() => {\n      const selection = this.attrs.composer.editor.getSelectionRange();\n\n      const cursor = selection[0];\n\n      if (selection[1] - cursor > 0) return;\n\n      // Search backwards from the cursor for an ':' symbol. If we find\n      // one and followed by a whitespace, we will want to show the\n      // autocomplete dropdown!\n      const lastChunk = this.attrs.composer.editor.getLastNChars(15);\n      absEmojiStart = 0;\n      for (let i = lastChunk.length - 1; i >= 0; i--) {\n        const character = lastChunk.substr(i, 1);\n        // check what user typed, emoji names only contains alphanumeric,\n        // underline, '+' and '-'\n        if (!/[a-z0-9]|\\+|\\-|_|\\:/.test(character)) break;\n        // make sure ':' preceded by a whitespace or newline\n        if (character === ':' && (i == 0 || /\\s/.test(lastChunk.substr(i - 1, 1)))) {\n          relEmojiStart = i + 1;\n          absEmojiStart = cursor - lastChunk.length + i + 1;\n          break;\n        }\n      }\n\n      dropdown.hide();\n      dropdown.active = false;\n\n      if (absEmojiStart) {\n        typed = lastChunk.substring(relEmojiStart).toLowerCase();\n\n        const makeSuggestion = function ({ emoji, name, code }) {\n          return (\n            <button\n              key={emoji}\n              onclick={() => applySuggestion(emoji)}\n              onmouseenter={function () {\n                dropdown.setIndex($(this).parent().index() - 1);\n              }}\n            >\n              <img alt={emoji} className=\"emoji\" draggable=\"false\" loading=\"lazy\" src={`${cdn()}72x72/${code}.png`} />\n              {name}\n            </button>\n          );\n        };\n\n        const buildSuggestions = () => {\n          const similarEmoji = [];\n\n          // Build a regular expression to do a fuzzy match of the given input string\n          const fuzzyRegexp = function (str) {\n            const reEscape = new RegExp('\\\\(([' + '+.*?[]{}()^$|\\\\'.replace(/(.)/g, '\\\\$1') + '])\\\\)', 'g');\n            return new RegExp('(.*)' + str.toLowerCase().replace(/(.)/g, '($1)(.*?)').replace(reEscape, '(\\\\$1)') + '$', 'i');\n          };\n          const regTyped = fuzzyRegexp(typed);\n\n          let maxSuggestions = 7;\n\n          const findMatchingEmojis = (matcher) => {\n            for (let i = 0; i < emojiKeys.length && maxSuggestions > 0; i++) {\n              const curEmoji = emojiKeys[i];\n\n              if (similarEmoji.indexOf(curEmoji) === -1) {\n                const names = emojiMap[curEmoji];\n                for (let name of names) {\n                  if (matcher(name)) {\n                    --maxSuggestions;\n                    similarEmoji.push(curEmoji);\n                    break;\n                  }\n                }\n              }\n            }\n          };\n\n          // First, try to find all emojis starting with the given string\n          findMatchingEmojis((emoji) => emoji.indexOf(typed) === 0);\n\n          // If there are still suggestions left, try for some fuzzy matches\n          findMatchingEmojis((emoji) => regTyped.test(emoji));\n\n          const suggestions = similarEmoji\n            .map((emoji) => ({\n              emoji,\n              name: emojiMap[emoji][0],\n              code: getEmojiIconCode(emoji),\n            }))\n            .map(makeSuggestion);\n\n          if (suggestions.length) {\n            dropdown.items = suggestions;\n            m.render($container[0], dropdown.render());\n\n            dropdown.show();\n            const coordinates = this.attrs.composer.editor.getCaretCoordinates(absEmojiStart);\n            const width = dropdown.$().outerWidth();\n            const height = dropdown.$().outerHeight();\n            const parent = dropdown.$().offsetParent();\n            let left = coordinates.left;\n            let top = coordinates.top + 15;\n\n            // Keep the dropdown inside the editor.\n            if (top + height > parent.height()) {\n              top = coordinates.top - height - 15;\n            }\n            if (left + width > parent.width()) {\n              left = parent.width() - width;\n            }\n\n            // Prevent the dropdown from going off screen on mobile\n            top = Math.max(-(parent.offset().top - $(document).scrollTop()), top);\n            left = Math.max(-parent.offset().left, left);\n\n            dropdown.show(left, top);\n          }\n        };\n\n        buildSuggestions();\n\n        dropdown.setIndex(0);\n        dropdown.$().scrollTop(0);\n        dropdown.active = true;\n      }\n    });\n  });\n\n  extend(TextEditor.prototype, 'toolbarItems', function (items) {\n    items.add(\n      'emoji',\n      <TextEditorButton onclick={() => this.attrs.composer.editor.insertAtCursor(' :')} icon=\"far fa-smile\">\n        {app.translator.trans('flarum-emoji.forum.composer.emoji_tooltip')}\n      </TextEditorButton>\n    );\n  });\n}\n","import Fragment from 'flarum/common/Fragment';\n\nexport default class AutocompleteDropdown extends Fragment {\n  items = [];\n  active = false;\n  index = 0;\n  keyWasJustPressed = false;\n\n  view() {\n    return (\n      <ul className=\"Dropdown-menu EmojiDropdown\">\n        <li className=\"Dropdown-header\">{app.translator.trans('flarum-emoji.forum.composer.type_to_search_text')}</li>\n        {this.items.map((item) => (\n          <li key={item.attrs.key}>{item}</li>\n        ))}\n      </ul>\n    );\n  }\n\n  show(left, top) {\n    this.$()\n      .show()\n      .css({\n        left: left + 'px',\n        top: top + 'px',\n      });\n    this.active = true;\n  }\n\n  hide() {\n    this.$().hide();\n    this.active = false;\n  }\n\n  navigate(delta) {\n    this.keyWasJustPressed = true;\n    this.setIndex(this.index + delta, true);\n    clearTimeout(this.keyWasJustPressedTimeout);\n    this.keyWasJustPressedTimeout = setTimeout(() => (this.keyWasJustPressed = false), 500);\n  }\n\n  complete() {\n    this.$('li:not(.Dropdown-header)').eq(this.index).find('button').click();\n  }\n\n  setIndex(index, scrollToItem) {\n    if (this.keyWasJustPressed && !scrollToItem) return;\n\n    const $dropdown = this.$();\n    const $items = $dropdown.find('li:not(.Dropdown-header)');\n    let rangedIndex = index;\n\n    if (rangedIndex < 0) {\n      rangedIndex = $items.length - 1;\n    } else if (rangedIndex >= $items.length) {\n      rangedIndex = 0;\n    }\n\n    this.index = rangedIndex;\n\n    const $item = $items.removeClass('active').eq(rangedIndex).addClass('active');\n\n    if (scrollToItem) {\n      const dropdownScroll = $dropdown.scrollTop();\n      const dropdownTop = $dropdown.offset().top;\n      const dropdownBottom = dropdownTop + $dropdown.outerHeight();\n      const itemTop = $item.offset().top;\n      const itemBottom = itemTop + $item.outerHeight();\n\n      let scrollTop;\n      if (itemTop < dropdownTop) {\n        scrollTop = dropdownScroll - dropdownTop + itemTop - parseInt($dropdown.css('padding-top'), 10);\n      } else if (itemBottom > dropdownBottom) {\n        scrollTop = dropdownScroll - dropdownBottom + itemBottom + parseInt($dropdown.css('padding-bottom'), 10);\n      }\n\n      if (typeof scrollTop !== 'undefined') {\n        $dropdown.stop(true).animate({ scrollTop }, 100);\n      }\n    }\n  }\n}\n","/*! Copyright Twitter Inc. and other contributors. Licensed under MIT */ /*\n  https://github.com/twitter/twemoji/blob/gh-pages/LICENSE\n*/\n\nimport twemoji from 'twemoji';\n\n// avoid using a string literal like '\\u200D' here because minifiers expand it inline\nconst U200D = String.fromCharCode(0x200d);\n\n// avoid runtime RegExp creation for not so smart,\n// not JIT based, and old browsers / engines\nconst UFE0Fg = /\\uFE0F/g;\n\n/**\n * Used to both remove the possible variant\n *  and to convert utf16 into code points.\n *  If there is a zero-width-joiner (U+200D), leave the variants in.\n * @param   string    the raw text of the emoji match\n * @return  string    the code point\n */\nexport default function getEmojiIconCode(emoji) {\n  return twemoji.convert.toCodePoint(emoji.indexOf(U200D) < 0 ? emoji.replace(UFE0Fg, '') : emoji);\n}\n","import app from 'flarum/forum/app';\n\nimport addComposerAutocomplete from './addComposerAutocomplete';\nimport renderEmoji from './renderEmoji';\n\napp.initializers.add('flarum-emoji', () => {\n  // After typing ':' in the composer, show a dropdown suggesting a bunch of\n  // emoji that the user could use.\n  addComposerAutocomplete();\n\n  // render emoji as image in Posts content and title.\n  renderEmoji();\n});\n","import twemoji from 'twemoji';\n\nimport { override } from 'flarum/common/extend';\nimport Post from 'flarum/common/models/Post';\n\nimport cdn from '../common/cdn';\n\nfunction options() {\n  return {\n    base: cdn(),\n    attributes: () => ({\n      loading: 'lazy',\n    }),\n  }\n}\n\n/**\n * Parses an HTML string into a `<body>` node containing the HTML content.\n *\n * Vanilla JS implementation of jQuery's `$.parseHTML()`,\n * sourced from http://youmightnotneedjquery.com/\n */\nfunction parseHTML(str) {\n  const tmp = document.implementation.createHTMLDocument();\n  tmp.body.innerHTML = str;\n\n  return tmp.body;\n}\n\nexport default function renderEmoji() {\n  override(Post.prototype, 'contentHtml', function (original) {\n    const contentHtml = original();\n\n    if (this.oldContentHtml !== contentHtml) {\n      // We need to parse the HTML string into a DOM node, then give it to Twemoji.\n      //\n      // This prevents some issues with the default find-replace that would be performed\n      // on a string passed to `Twemoji.parse()`.\n      //\n      // The parse function can only handle a single DOM node provided, so we need to\n      // wrap it in a node. In our `parseHTML` implementation, we wrap it in a `<body>`\n      // element. This gets stripped below.\n      //\n      // See https://github.com/flarum/core/issues/2958\n      const emojifiedDom = twemoji.parse(parseHTML(contentHtml), options());\n\n      // Steal the HTML string inside the emojified DOM `<body>` tag.\n      this.emojifiedContentHtml = emojifiedDom.innerHTML;\n\n      this.oldContentHtml = contentHtml;\n    }\n\n    return this.emojifiedContentHtml;\n  });\n\n  override(s9e.TextFormatter, 'preview', (original, text, element) => {\n    original(text, element);\n\n    twemoji.parse(element, options());\n  });\n}\n","/*! Copyright Twitter Inc. and other contributors. Licensed under MIT */\nvar twemoji=function(){\"use strict\";var twemoji={base:\"https://twemoji.maxcdn.com/v/14.0.2/\",ext:\".png\",size:\"72x72\",className:\"emoji\",convert:{fromCodePoint:fromCodePoint,toCodePoint:toCodePoint},onerror:function onerror(){if(this.parentNode){this.parentNode.replaceChild(createText(this.alt,false),this)}},parse:parse,replace:replace,test:test},escaper={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",\"'\":\"&#39;\",'\"':\"&quot;\"},re=/(?:\\ud83d\\udc68\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffc-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83e\\uddd1\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83e\\uddd1\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc68\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffc-\\udfff]|\\ud83d\\udc68\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83d\\udc68\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83d\\udc68\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83d\\udc68\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffc-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffc-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udffe]|\\ud83e\\uddd1\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffc-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83e\\uddd1\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83e\\uddd1\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udffe]|\\ud83e\\uddd1\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68|\\ud83d\\udc69\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d[\\udc68\\udc69]|\\ud83e\\udef1\\ud83c\\udffb\\u200d\\ud83e\\udef2\\ud83c[\\udffc-\\udfff]|\\ud83e\\udef1\\ud83c\\udffc\\u200d\\ud83e\\udef2\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83e\\udef1\\ud83c\\udffd\\u200d\\ud83e\\udef2\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83e\\udef1\\ud83c\\udffe\\u200d\\ud83e\\udef2\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83e\\udef1\\ud83c\\udfff\\u200d\\ud83e\\udef2\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc68\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68|\\ud83d\\udc69\\u200d\\u2764\\ufe0f\\u200d\\ud83d[\\udc68\\udc69]|\\ud83e\\uddd1\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1|\\ud83d\\udc6b\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc6c\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc6d\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc8f\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc91\\ud83c[\\udffb-\\udfff]|\\ud83e\\udd1d\\ud83c[\\udffb-\\udfff]|\\ud83d[\\udc6b-\\udc6d\\udc8f\\udc91]|\\ud83e\\udd1d)|(?:\\ud83d[\\udc68\\udc69]|\\ud83e\\uddd1)(?:\\ud83c[\\udffb-\\udfff])?\\u200d(?:\\u2695\\ufe0f|\\u2696\\ufe0f|\\u2708\\ufe0f|\\ud83c[\\udf3e\\udf73\\udf7c\\udf84\\udf93\\udfa4\\udfa8\\udfeb\\udfed]|\\ud83d[\\udcbb\\udcbc\\udd27\\udd2c\\ude80\\ude92]|\\ud83e[\\uddaf-\\uddb3\\uddbc\\uddbd])|(?:\\ud83c[\\udfcb\\udfcc]|\\ud83d[\\udd74\\udd75]|\\u26f9)((?:\\ud83c[\\udffb-\\udfff]|\\ufe0f)\\u200d[\\u2640\\u2642]\\ufe0f)|(?:\\ud83c[\\udfc3\\udfc4\\udfca]|\\ud83d[\\udc6e\\udc70\\udc71\\udc73\\udc77\\udc81\\udc82\\udc86\\udc87\\ude45-\\ude47\\ude4b\\ude4d\\ude4e\\udea3\\udeb4-\\udeb6]|\\ud83e[\\udd26\\udd35\\udd37-\\udd39\\udd3d\\udd3e\\uddb8\\uddb9\\uddcd-\\uddcf\\uddd4\\uddd6-\\udddd])(?:\\ud83c[\\udffb-\\udfff])?\\u200d[\\u2640\\u2642]\\ufe0f|(?:\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83c\\udff3\\ufe0f\\u200d\\u26a7\\ufe0f|\\ud83c\\udff3\\ufe0f\\u200d\\ud83c\\udf08|\\ud83d\\ude36\\u200d\\ud83c\\udf2b\\ufe0f|\\u2764\\ufe0f\\u200d\\ud83d\\udd25|\\u2764\\ufe0f\\u200d\\ud83e\\ude79|\\ud83c\\udff4\\u200d\\u2620\\ufe0f|\\ud83d\\udc15\\u200d\\ud83e\\uddba|\\ud83d\\udc3b\\u200d\\u2744\\ufe0f|\\ud83d\\udc41\\u200d\\ud83d\\udde8|\\ud83d\\udc68\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc6f\\u200d\\u2640\\ufe0f|\\ud83d\\udc6f\\u200d\\u2642\\ufe0f|\\ud83d\\ude2e\\u200d\\ud83d\\udca8|\\ud83d\\ude35\\u200d\\ud83d\\udcab|\\ud83e\\udd3c\\u200d\\u2640\\ufe0f|\\ud83e\\udd3c\\u200d\\u2642\\ufe0f|\\ud83e\\uddde\\u200d\\u2640\\ufe0f|\\ud83e\\uddde\\u200d\\u2642\\ufe0f|\\ud83e\\udddf\\u200d\\u2640\\ufe0f|\\ud83e\\udddf\\u200d\\u2642\\ufe0f|\\ud83d\\udc08\\u200d\\u2b1b)|[#*0-9]\\ufe0f?\\u20e3|(?:[©®\\u2122\\u265f]\\ufe0f)|(?:\\ud83c[\\udc04\\udd70\\udd71\\udd7e\\udd7f\\ude02\\ude1a\\ude2f\\ude37\\udf21\\udf24-\\udf2c\\udf36\\udf7d\\udf96\\udf97\\udf99-\\udf9b\\udf9e\\udf9f\\udfcd\\udfce\\udfd4-\\udfdf\\udff3\\udff5\\udff7]|\\ud83d[\\udc3f\\udc41\\udcfd\\udd49\\udd4a\\udd6f\\udd70\\udd73\\udd76-\\udd79\\udd87\\udd8a-\\udd8d\\udda5\\udda8\\uddb1\\uddb2\\uddbc\\uddc2-\\uddc4\\uddd1-\\uddd3\\udddc-\\uddde\\udde1\\udde3\\udde8\\uddef\\uddf3\\uddfa\\udecb\\udecd-\\udecf\\udee0-\\udee5\\udee9\\udef0\\udef3]|[\\u203c\\u2049\\u2139\\u2194-\\u2199\\u21a9\\u21aa\\u231a\\u231b\\u2328\\u23cf\\u23ed-\\u23ef\\u23f1\\u23f2\\u23f8-\\u23fa\\u24c2\\u25aa\\u25ab\\u25b6\\u25c0\\u25fb-\\u25fe\\u2600-\\u2604\\u260e\\u2611\\u2614\\u2615\\u2618\\u2620\\u2622\\u2623\\u2626\\u262a\\u262e\\u262f\\u2638-\\u263a\\u2640\\u2642\\u2648-\\u2653\\u2660\\u2663\\u2665\\u2666\\u2668\\u267b\\u267f\\u2692-\\u2697\\u2699\\u269b\\u269c\\u26a0\\u26a1\\u26a7\\u26aa\\u26ab\\u26b0\\u26b1\\u26bd\\u26be\\u26c4\\u26c5\\u26c8\\u26cf\\u26d1\\u26d3\\u26d4\\u26e9\\u26ea\\u26f0-\\u26f5\\u26f8\\u26fa\\u26fd\\u2702\\u2708\\u2709\\u270f\\u2712\\u2714\\u2716\\u271d\\u2721\\u2733\\u2734\\u2744\\u2747\\u2757\\u2763\\u2764\\u27a1\\u2934\\u2935\\u2b05-\\u2b07\\u2b1b\\u2b1c\\u2b50\\u2b55\\u3030\\u303d\\u3297\\u3299])(?:\\ufe0f|(?!\\ufe0e))|(?:(?:\\ud83c[\\udfcb\\udfcc]|\\ud83d[\\udd74\\udd75\\udd90]|[\\u261d\\u26f7\\u26f9\\u270c\\u270d])(?:\\ufe0f|(?!\\ufe0e))|(?:\\ud83c[\\udf85\\udfc2-\\udfc4\\udfc7\\udfca]|\\ud83d[\\udc42\\udc43\\udc46-\\udc50\\udc66-\\udc69\\udc6e\\udc70-\\udc78\\udc7c\\udc81-\\udc83\\udc85-\\udc87\\udcaa\\udd7a\\udd95\\udd96\\ude45-\\ude47\\ude4b-\\ude4f\\udea3\\udeb4-\\udeb6\\udec0\\udecc]|\\ud83e[\\udd0c\\udd0f\\udd18-\\udd1c\\udd1e\\udd1f\\udd26\\udd30-\\udd39\\udd3d\\udd3e\\udd77\\uddb5\\uddb6\\uddb8\\uddb9\\uddbb\\uddcd-\\uddcf\\uddd1-\\udddd\\udec3-\\udec5\\udef0-\\udef6]|[\\u270a\\u270b]))(?:\\ud83c[\\udffb-\\udfff])?|(?:\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc65\\udb40\\udc6e\\udb40\\udc67\\udb40\\udc7f|\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc73\\udb40\\udc63\\udb40\\udc74\\udb40\\udc7f|\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc77\\udb40\\udc6c\\udb40\\udc73\\udb40\\udc7f|\\ud83c\\udde6\\ud83c[\\udde8-\\uddec\\uddee\\uddf1\\uddf2\\uddf4\\uddf6-\\uddfa\\uddfc\\uddfd\\uddff]|\\ud83c\\udde7\\ud83c[\\udde6\\udde7\\udde9-\\uddef\\uddf1-\\uddf4\\uddf6-\\uddf9\\uddfb\\uddfc\\uddfe\\uddff]|\\ud83c\\udde8\\ud83c[\\udde6\\udde8\\udde9\\uddeb-\\uddee\\uddf0-\\uddf5\\uddf7\\uddfa-\\uddff]|\\ud83c\\udde9\\ud83c[\\uddea\\uddec\\uddef\\uddf0\\uddf2\\uddf4\\uddff]|\\ud83c\\uddea\\ud83c[\\udde6\\udde8\\uddea\\uddec\\udded\\uddf7-\\uddfa]|\\ud83c\\uddeb\\ud83c[\\uddee-\\uddf0\\uddf2\\uddf4\\uddf7]|\\ud83c\\uddec\\ud83c[\\udde6\\udde7\\udde9-\\uddee\\uddf1-\\uddf3\\uddf5-\\uddfa\\uddfc\\uddfe]|\\ud83c\\udded\\ud83c[\\uddf0\\uddf2\\uddf3\\uddf7\\uddf9\\uddfa]|\\ud83c\\uddee\\ud83c[\\udde8-\\uddea\\uddf1-\\uddf4\\uddf6-\\uddf9]|\\ud83c\\uddef\\ud83c[\\uddea\\uddf2\\uddf4\\uddf5]|\\ud83c\\uddf0\\ud83c[\\uddea\\uddec-\\uddee\\uddf2\\uddf3\\uddf5\\uddf7\\uddfc\\uddfe\\uddff]|\\ud83c\\uddf1\\ud83c[\\udde6-\\udde8\\uddee\\uddf0\\uddf7-\\uddfb\\uddfe]|\\ud83c\\uddf2\\ud83c[\\udde6\\udde8-\\udded\\uddf0-\\uddff]|\\ud83c\\uddf3\\ud83c[\\udde6\\udde8\\uddea-\\uddec\\uddee\\uddf1\\uddf4\\uddf5\\uddf7\\uddfa\\uddff]|\\ud83c\\uddf4\\ud83c\\uddf2|\\ud83c\\uddf5\\ud83c[\\udde6\\uddea-\\udded\\uddf0-\\uddf3\\uddf7-\\uddf9\\uddfc\\uddfe]|\\ud83c\\uddf6\\ud83c\\udde6|\\ud83c\\uddf7\\ud83c[\\uddea\\uddf4\\uddf8\\uddfa\\uddfc]|\\ud83c\\uddf8\\ud83c[\\udde6-\\uddea\\uddec-\\uddf4\\uddf7-\\uddf9\\uddfb\\uddfd-\\uddff]|\\ud83c\\uddf9\\ud83c[\\udde6\\udde8\\udde9\\uddeb-\\udded\\uddef-\\uddf4\\uddf7\\uddf9\\uddfb\\uddfc\\uddff]|\\ud83c\\uddfa\\ud83c[\\udde6\\uddec\\uddf2\\uddf3\\uddf8\\uddfe\\uddff]|\\ud83c\\uddfb\\ud83c[\\udde6\\udde8\\uddea\\uddec\\uddee\\uddf3\\uddfa]|\\ud83c\\uddfc\\ud83c[\\uddeb\\uddf8]|\\ud83c\\uddfd\\ud83c\\uddf0|\\ud83c\\uddfe\\ud83c[\\uddea\\uddf9]|\\ud83c\\uddff\\ud83c[\\udde6\\uddf2\\uddfc]|\\ud83c[\\udccf\\udd8e\\udd91-\\udd9a\\udde6-\\uddff\\ude01\\ude32-\\ude36\\ude38-\\ude3a\\ude50\\ude51\\udf00-\\udf20\\udf2d-\\udf35\\udf37-\\udf7c\\udf7e-\\udf84\\udf86-\\udf93\\udfa0-\\udfc1\\udfc5\\udfc6\\udfc8\\udfc9\\udfcf-\\udfd3\\udfe0-\\udff0\\udff4\\udff8-\\udfff]|\\ud83d[\\udc00-\\udc3e\\udc40\\udc44\\udc45\\udc51-\\udc65\\udc6a\\udc6f\\udc79-\\udc7b\\udc7d-\\udc80\\udc84\\udc88-\\udc8e\\udc90\\udc92-\\udca9\\udcab-\\udcfc\\udcff-\\udd3d\\udd4b-\\udd4e\\udd50-\\udd67\\udda4\\uddfb-\\ude44\\ude48-\\ude4a\\ude80-\\udea2\\udea4-\\udeb3\\udeb7-\\udebf\\udec1-\\udec5\\uded0-\\uded2\\uded5-\\uded7\\udedd-\\udedf\\udeeb\\udeec\\udef4-\\udefc\\udfe0-\\udfeb\\udff0]|\\ud83e[\\udd0d\\udd0e\\udd10-\\udd17\\udd20-\\udd25\\udd27-\\udd2f\\udd3a\\udd3c\\udd3f-\\udd45\\udd47-\\udd76\\udd78-\\uddb4\\uddb7\\uddba\\uddbc-\\uddcc\\uddd0\\uddde-\\uddff\\ude70-\\ude74\\ude78-\\ude7c\\ude80-\\ude86\\ude90-\\udeac\\udeb0-\\udeba\\udec0-\\udec2\\uded0-\\uded9\\udee0-\\udee7]|[\\u23e9-\\u23ec\\u23f0\\u23f3\\u267e\\u26ce\\u2705\\u2728\\u274c\\u274e\\u2753-\\u2755\\u2795-\\u2797\\u27b0\\u27bf\\ue50a])|\\ufe0f/g,UFE0Fg=/\\uFE0F/g,U200D=String.fromCharCode(8205),rescaper=/[&<>'\"]/g,shouldntBeParsed=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,fromCharCode=String.fromCharCode;return twemoji;function createText(text,clean){return document.createTextNode(clean?text.replace(UFE0Fg,\"\"):text)}function escapeHTML(s){return s.replace(rescaper,replacer)}function defaultImageSrcGenerator(icon,options){return\"\".concat(options.base,options.size,\"/\",icon,options.ext)}function grabAllTextNodes(node,allText){var childNodes=node.childNodes,length=childNodes.length,subnode,nodeType;while(length--){subnode=childNodes[length];nodeType=subnode.nodeType;if(nodeType===3){allText.push(subnode)}else if(nodeType===1&&!(\"ownerSVGElement\"in subnode)&&!shouldntBeParsed.test(subnode.nodeName.toLowerCase())){grabAllTextNodes(subnode,allText)}}return allText}function grabTheRightIcon(rawText){return toCodePoint(rawText.indexOf(U200D)<0?rawText.replace(UFE0Fg,\"\"):rawText)}function parseNode(node,options){var allText=grabAllTextNodes(node,[]),length=allText.length,attrib,attrname,modified,fragment,subnode,text,match,i,index,img,rawText,iconId,src;while(length--){modified=false;fragment=document.createDocumentFragment();subnode=allText[length];text=subnode.nodeValue;i=0;while(match=re.exec(text)){index=match.index;if(index!==i){fragment.appendChild(createText(text.slice(i,index),true))}rawText=match[0];iconId=grabTheRightIcon(rawText);i=index+rawText.length;src=options.callback(iconId,options);if(iconId&&src){img=new Image;img.onerror=options.onerror;img.setAttribute(\"draggable\",\"false\");attrib=options.attributes(rawText,iconId);for(attrname in attrib){if(attrib.hasOwnProperty(attrname)&&attrname.indexOf(\"on\")!==0&&!img.hasAttribute(attrname)){img.setAttribute(attrname,attrib[attrname])}}img.className=options.className;img.alt=rawText;img.src=src;modified=true;fragment.appendChild(img)}if(!img)fragment.appendChild(createText(rawText,false));img=null}if(modified){if(i<text.length){fragment.appendChild(createText(text.slice(i),true))}subnode.parentNode.replaceChild(fragment,subnode)}}return node}function parseString(str,options){return replace(str,function(rawText){var ret=rawText,iconId=grabTheRightIcon(rawText),src=options.callback(iconId,options),attrib,attrname;if(iconId&&src){ret=\"<img \".concat('class=\"',options.className,'\" ','draggable=\"false\" ','alt=\"',rawText,'\"',' src=\"',src,'\"');attrib=options.attributes(rawText,iconId);for(attrname in attrib){if(attrib.hasOwnProperty(attrname)&&attrname.indexOf(\"on\")!==0&&ret.indexOf(\" \"+attrname+\"=\")===-1){ret=ret.concat(\" \",attrname,'=\"',escapeHTML(attrib[attrname]),'\"')}}ret=ret.concat(\"/>\")}return ret})}function replacer(m){return escaper[m]}function returnNull(){return null}function toSizeSquaredAsset(value){return typeof value===\"number\"?value+\"x\"+value:value}function fromCodePoint(codepoint){var code=typeof codepoint===\"string\"?parseInt(codepoint,16):codepoint;if(code<65536){return fromCharCode(code)}code-=65536;return fromCharCode(55296+(code>>10),56320+(code&1023))}function parse(what,how){if(!how||typeof how===\"function\"){how={callback:how}}return(typeof what===\"string\"?parseString:parseNode)(what,{callback:how.callback||defaultImageSrcGenerator,attributes:typeof how.attributes===\"function\"?how.attributes:returnNull,base:typeof how.base===\"string\"?how.base:twemoji.base,ext:how.ext||twemoji.ext,size:how.folder||toSizeSquaredAsset(how.size||twemoji.size),className:how.className||twemoji.className,onerror:how.onerror||twemoji.onerror})}function replace(text,callback){return String(text).replace(re,callback)}function test(text){re.lastIndex=0;var result=re.test(text);re.lastIndex=0;return result}function toCodePoint(unicodeSurrogates,sep){var r=[],c=0,p=0,i=0;while(i<unicodeSurrogates.length){c=unicodeSurrogates.charCodeAt(i++);if(p){r.push((65536+(p-55296<<10)+(c-56320)).toString(16));p=0}else if(55296<=c&&c<=56319){p=c}else{r.push(c.toString(16))}}return r.join(sep||\"-\")}}();\nexport default twemoji;","module.exports = flarum.core.compat['common/Fragment'];","module.exports = flarum.core.compat['common/components/TextEditor'];","module.exports = flarum.core.compat['common/components/TextEditorButton'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['common/models/Post'];","module.exports = flarum.core.compat['common/utils/KeyboardNavigatable'];","module.exports = flarum.core.compat['forum/app'];","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","export { default } from './generated/emojis.json';\n\nexport { default as variants } from './generated/variants.json';\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export * from './src/forum';\n"],"names":["twemoji","app","version","exec","base","forum","attribute","replace","emojiMap","extend","TextEditor","TextEditorButton","KeyboardNavigatable","AutocompleteDropdown","getEmojiIconCode","cdn","addComposerAutocomplete","emojiKeys","Object","keys","$container","$","dropdown","prototype","$editor","wrap","navigator","when","active","onUp","navigate","onDown","onSelect","complete","bind","onCancel","hide","bindTo","after","params","relEmojiStart","absEmojiStart","typed","applySuggestion","replacement","attrs","composer","editor","replaceBeforeCursor","inputListeners","push","selection","getSelectionRange","cursor","lastChunk","getLastNChars","i","length","character","substr","test","substring","toLowerCase","makeSuggestion","emoji","name","code","setIndex","parent","index","buildSuggestions","similarEmoji","fuzzyRegexp","str","reEscape","RegExp","regTyped","maxSuggestions","findMatchingEmojis","matcher","curEmoji","indexOf","names","suggestions","map","items","m","render","show","coordinates","getCaretCoordinates","width","outerWidth","height","outerHeight","offsetParent","left","top","Math","max","offset","document","scrollTop","add","insertAtCursor","translator","trans","Fragment","keyWasJustPressed","view","item","key","css","delta","clearTimeout","keyWasJustPressedTimeout","setTimeout","eq","find","click","scrollToItem","$dropdown","$items","rangedIndex","$item","removeClass","addClass","dropdownScroll","dropdownTop","dropdownBottom","itemTop","itemBottom","parseInt","stop","animate","U200D","String","fromCharCode","UFE0Fg","convert","toCodePoint","renderEmoji","initializers","override","Post","options","attributes","loading","parseHTML","tmp","implementation","createHTMLDocument","body","innerHTML","original","contentHtml","oldContentHtml","emojifiedDom","parse","emojifiedContentHtml","s9e","TextFormatter","text","element","ext","size","className","fromCodePoint","onerror","parentNode","replaceChild","createText","alt","escaper","re","rescaper","shouldntBeParsed","clean","createTextNode","escapeHTML","s","replacer","defaultImageSrcGenerator","icon","concat","grabAllTextNodes","node","allText","childNodes","subnode","nodeType","nodeName","grabTheRightIcon","rawText","parseNode","attrib","attrname","modified","fragment","match","img","iconId","src","createDocumentFragment","nodeValue","appendChild","slice","callback","Image","setAttribute","hasOwnProperty","hasAttribute","parseString","ret","returnNull","toSizeSquaredAsset","value","codepoint","what","how","folder","lastIndex","result","unicodeSurrogates","sep","r","c","p","charCodeAt","toString","join","setPrototypeOf","_inheritsLoose","subClass","superClass","create","constructor","_setPrototypeOf","o","__proto__"],"sourceRoot":""}